---
title: 2.9.sync Conflict 20251016 154157 C6s5gde
published: 2025-10-15
tags: [ProgramacionWeb, RubyonRails, Rails, ITO, HTML, CSS]
category: ProgramacionWeb
draft: false
---

>[! Note]
>Realizar la configuración de la foto.

Se puede usar time with para otro framework de CSS, la ventaja del framework, es qeu tanto la hoja de estilo, como la DB lo realiza de  forma transparente, permitiendo tener un seguimiento automatizado (como en las ágiles, con el manejo de código)

¿Cuando usar HTML y cuando JSON?

Al hacer click en 
Netwok >> 200 - Products >> Headers >> Responde Headers >> content-type

De a cuerdo como lo pide el cliente, como lo contesta; sini por default, usa el html.

RAPIDAPI CLIENT

```
Started GET "/products" for 127.0.0.1 at 2025-10-15 12:32:35 -0600
Processing by ProductsController#index as */*
  Rendering layout layouts/application.html.erb
  Rendering products/index.html.erb within layouts/application
  Product Load (0.3ms)  SELECT "products".* FROM "products" /*action='index',application='Store',controller='products'*/
  ↳ app/views/products/index.html.erb:7
  Rendered products/index.html.erb within layouts/application (Duration: 2.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
Completed 200 OK in 78ms (Views: 5.4ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
```


Podemos visualuar con 

```
bin/rails route
```




Podemos obtener valores con

```
https:../products/1:json
```

Maneja de manera interna en que lo va a regresar, maneja un cokiees, (a pesar de que no tengamos sesiones), el http (sobre todo el 1), no tiene memoria,

>[! Ejemplo]
>Cuando le decimos listar, y mostrar el detalle, puede mostrar el 
> id, pormode editar, sin embargo necesitamos mandar el id, aunque el 2 parezca que no lo enviamos.

El mensaje

```
Started GET "/pridcuts/2/edit" for 127.00.1....
Orcessing bu PrductosConroller #edit as HTML
... set_product
Renderig layour aplications.html.erb
//Procesa la forma
Termina
```

---

Si damos en editar y cuando nos pida ingresar el valor tenemos

``` impo:4
    <main>
      <!-- BEGIN app/views/products/edit.html.erb --><h1>Edit product</h1>

<!-- BEGIN app/views/products/_form.html.erb --><form enctype="multipart/form-data" action="/products/2" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="patch" autocomplete="off" /><input type="hidden" name="authenticity_token" value="sGOplEaZP9tvE7UXaUew9Zts-uNtMixywKVjp2jY9-2JAxCgv0Av6sAbm9aLCTPLIn_iBInCsYlwaUg6FNwPfQ" autocomplete="off" />
  <div>
    <label style="display: block" for="product_name">Name</label>
    <input type="text" value="Pants" name="product[name]" id="product_name" />
  </div>

```

Podemos ver el token de autenticidad, de todo esto, el URL, 


```
Started PATCH "/products/2" for 127.0.0.1 at 2025-10-15 12:45:38 -0600
Processing by ProductsController#update as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "product" => {"name" => "Pans", "description" => ""}, "commit" => "Update Product", "id" => "2"}
  Session Load (0.4ms)  SELECT "sessions".* FROM "sessions" WHERE "sessions"."id" = 15 LIMIT 1 /*action='update',application='Store',controller='products'*/
  ↳ app/controllers/concerns/authentication.rb:29:in 'Authentication#find_session_by_cookie'
  Product Load (0.5ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 2 LIMIT 1 /*action='update',application='Store',controller='products'*/
  ↳ app/controllers/products_controller.rb:44:in 'ProductsController#set_product'
  TRANSACTION (1.1ms)  BEGIN immediate TRANSACTION /*action='update',application='Store',controller='products'*/
  ↳ app/controllers/products_controller.rb:30:in 'ProductsController#update'
  ActionText::RichText Load (6.6ms)  SELECT "action_text_rich_texts".* FROM "action_text_rich_texts" WHERE "action_text_rich_texts"."record_id" = 2 AND "action_text_rich_texts"."record_type" = 'Product' AND "action_text_rich_texts"."name" = 'description' LIMIT 1 /*action='update',application='Store',controller='products'*/
  ↳ app/controllers/products_controller.rb:30:in 'ProductsController#update'
  Product Update (0.5ms)  UPDATE "products" SET "name" = 'Pans', "updated_at" = '2025-10-15 18:45:38.958771' WHERE "products"."id" = 2 /*action='update',application='Store',controller='products'*/
  ↳ app/controllers/products_controller.rb:30:in 'ProductsController#update'
  ActionText::RichText Create (0.5ms)  INSERT INTO "action_text_rich_texts" ("name", "body", "record_type", "record_id", "created_at", "updated_at") VALUES ('description', '', 'Product', 2, '2025-10-15 18:45:39.195877', '2025-10-15 18:45:39.195877') RETURNING "id" /*action='update',application='Store',controller='products'*/
  ↳ app/controllers/products_controller.rb:30:in 'ProductsController#update'
  Product Update (0.2ms)  UPDATE "products" SET "updated_at" = '2025-10-15 18:45:39.235081' WHERE "products"."id" = 2 /*action='update',application='Store',controller='products'*/
  ↳ app/controllers/products_controller.rb:30:in 'ProductsController#update'
  TRANSACTION (32.0ms)  COMMIT TRANSACTION /*action='update',application='Store',controller='products'*/
  ↳ app/controllers/products_controller.rb:30:in 'ProductsController#update'
Redirected to http://127.0.0.1:3000/products/2
Completed 302 Found in 507ms (ActiveRecord: 41.6ms (6 queries, 0 cached) | GC: 5.2ms)


Started GET "/products/2" for 127.0.0.1 at 2025-10-15 12:45:39 -0600
Processing by ProductsController#show as TURBO_STREAM
  Parameters: {"id" => "2"}
  Product Load (1.3ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 2 LIMIT 1 /*action='show',application='Store',controller='products'*/
  ↳ app/controllers/products_controller.rb:44:in 'ProductsController#set_product'
  Rendering layout layouts/application.html.erb
  Rendering products/show.html.erb within layouts/application
  ActiveStorage::Attachment Load (0.3ms)  SELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = 2 AND "active_storage_attachments"."record_type" = 'Product' AND "active_storage_attachments"."name" = 'featured_image' LIMIT 1 /*action='show',application='Store',controller='products'*/
  ↳ app/views/products/show.html.erb:1
Read fragment views/products/show:7cf74637e43fb729455085e53252ced0/products/2-20251015184539235081 (0.6ms)
  ActionText::RichText Load (0.3ms)  SELECT "action_text_rich_texts".* FROM "action_text_rich_texts" WHERE "action_text_rich_texts"."record_id" = 2 AND "action_text_rich_texts"."record_type" = 'Product' AND "action_text_rich_texts"."name" = 'description' LIMIT 1 /*action='show',application='Store',controller='products'*/
  ↳ app/views/products/show.html.erb:5
  Rendered /home/angel/.local/share/mise/installs/ruby/3.4.6/lib/ruby/gems/3.4.0/gems/actiontext-8.0.3/app/views/action_text/contents/_content.html.erb within layouts/action_text/contents/_content (Duration: 5.0ms | GC: 0.0ms)
Write fragment views/products/show:7cf74637e43fb729455085e53252ced0/products/2-20251015184539235081 (0.5ms)
  Session Load (0.3ms)  SELECT "sessions".* FROM "sessions" WHERE "sessions"."id" = 15 LIMIT 1 /*action='show',application='Store',controller='products'*/
  ↳ app/controllers/concerns/authentication.rb:29:in 'Authentication#find_session_by_cookie'
  Rendered products/show.html.erb within layouts/application (Duration: 95.1ms | GC: 2.0ms)
  Rendered layout layouts/application.html.erb (Duration: 124.3ms | GC: 4.2ms)
Completed 200 OK in 264ms (Views: 159.4ms | ActiveRecord: 2.1ms (4 queries, 0 cached) | GC: 4.2ms)
```

Nos dice la entidad de quien mando a editar este producto, para identificarlo dentro de la sesión

---


Pasa algo similar en 

¿De donde saca el valor de una consulta si no viene implicita el dos en ID?

¿Cómo se codifican variables en HTTP 1.1? Hay dos formas
1. Con GET: 
2. Con POST: Despues del Header y Antes de lo que mande


----


```
<!-- BEGIN app/views/layouts/application.html.erb --><!DOCTYPE html>
<html>
  <head>
    <title>Store</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="7ob4EN6zOYaoK9k4_wVvMXpyNWcu6J8tsx6JfxxzV0IfvL7TlCOLNAHrsub0xcBhfiRMxe9gP3ber9W1T7inEg" />
    

    


    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <link rel="stylesheet" href="/assets/actiontext-e646701d.css" data-turbo-track="reload" />
<link rel="stylesheet" href="/assets/application-8b441ae0.css" data-turbo-track="reload" />
    <script type="importmap" data-turbo-track="reload">{
  "imports": {
    "application": "/assets/application-3da76259.js",
    "@hotwired/turbo-rails": "/assets/turbo.min-c1e82531.js",
    "@hotwired/stimulus": "/assets/stimulus.min-4b1e420e.js",
    "@hotwired/stimulus-loading": "/assets/stimulus-loading-1fc53fe7.js",
    "trix": "/assets/trix-4b540cb5.js",
    "@rails/actiontext": "/assets/actiontext.esm-f1c04d34.js",
    "controllers/application": "/assets/controllers/application-3affb389.js",
    "controllers/hello_controller": "/assets/controllers/hello_controller-708796bd.js",
    "controllers": "/assets/controllers/index-ee64e1f1.js"
  }
}</script>
<link rel="modulepreload" href="/assets/application-3da76259.js">
<link rel="modulepreload" href="/assets/turbo.min-c1e82531.js">
<link rel="modulepreload" href="/assets/stimulus.min-4b1e420e.js">
<link rel="modulepreload" href="/assets/stimulus-loading-1fc53fe7.js">
<link rel="modulepreload" href="/assets/trix-4b540cb5.js">
<link rel="modulepreload" href="/assets/actiontext.esm-f1c04d34.js">
<link rel="modulepreload" href="/assets/controllers/application-3affb389.js">
<link rel="modulepreload" href="/assets/controllers/hello_controller-708796bd.js">
<link rel="modulepreload" href="/assets/controllers/index-ee64e1f1.js">
<script type="module">import "application"</script>
  </head>

  <body>
    <nav>
      <a href="/">Home</a>
      <form class="button_to" method="post" action="/session"><input type="hidden" name="_method" value="delete" autocomplete="off" /><button type="submit">Log out</button><input type="hidden" name="authenticity_token" value="0RsG0i4hm8pjFrClS4RVRejD--QReAm6B4FB5QigsHEQK6tbo6_njIne6imR8lgEAMOhj4EQrFmHKlcZXqhS_g" autocomplete="off" /></form>
    </nav>

    <main>
      <!-- BEGIN app/views/products/edit.html.erb --><h1>Edit product</h1>

<!-- BEGIN app/views/products/_form.html.erb --><form enctype="multipart/form-data" action="/products/2" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="patch" autocomplete="off" /><input type="hidden" name="authenticity_token" value="6mJj2-7EBXFw67ZYBJJfhSpSXWrgPkkVmwOKyagXXCPTAtrvFx0VQN_jmJnm3Ny7k0FFjQTO1O4rz6FU1BOksw" autocomplete="off" />
  <div>
    <label style="display: block" for="product_name">Name</label>
    <input type="text" value="Pans" name="product[name]" id="product_name" />
  </div>

  <div>
    <label style="display: block" for="product_description">Description</label>
    <input type="hidden" name="product[description]" id="product_description_trix_input_product_2" value="" autocomplete="off" /><trix-editor id="product_description" input="product_description_trix_input_product_2" class="trix-content" data-direct-upload-url="http://127.0.0.1:3000/rails/active_storage/direct_uploads" data-blob-url-template="http://127.0.0.1:3000/rails/active_storage/blobs/redirect/:signed_id/:filename"></trix-editor>
  </div>

  <div>
    <label style="display: block" for="product_featured_image">Featured image</label>
    <input accept="image/*" type="file" name="product[featured_image]" id="product_featured_image" />
  </div>

  <div>
    <input type="submit" name="commit" value="Update Product" data-disable-with="Update Product" />
  </div>
</form><!-- END app/views/products/_form.html.erb -->
<a href="/products/2">Cancel</a>
<!-- END app/views/products/edit.html.erb -->
    </main>
  </body>
</html>
<!-- END app/views/layouts/application.html.erb -->
```


La clave esta aqca:

```
<!-- BEGIN app/views/products/_form.html.erb --><form enctype="multipart/form-data" action="[/products/2](view-source:http://127.0.0.1:3000/products/2)" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="patch" autocomplete="off" /><input type="hidden" name="authenticity_token" value="6mJj2-7EBXFw67ZYBJJfhSpSXWrgPkkVmwOKyagXXCPTAtrvFx0VQN_jmJnm3Ny7k0FFjQTO1O4rz6FU1BOksw" autocomplete="off" /> <div> <label style="display: block" for="product_name">Name</label> <input type="text" value="Pans" name="product[name]" id="product_name" /> </div>
```

Este Form

El post maneja el form
boton de update


En el siguiente ejecmplo esta codificado en POST

```
<!-- BEGIN app/views/products/_form.html.erb --><form enctype="multipart/form-data" action="[/products/2](view-source:http://127.0.0.1:3000/products/2)" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="patch" autocomplete="off" /><input type="hidden" name="authenticity_token" value="6mJj2-7EBXFw67ZYBJJfhSpSXWrgPkkVmwOKyagXXCPTAtrvFx0VQN_jmJnm3Ny7k0FFjQTO1O4rz6FU1BOksw" autocomplete="off" /> <div> <label style="display: block" for="product_name">Name</label> <input type="text" value="Pans" name="product[name]" id="product_name" /> </div>
```


El ID no esta en el URL como tal, pero vemos la ruta, en routes

```
products#update PATCH /products/:id(.:format)
```

Usando patch, no viene en el POST, sino en elURI y lo codifica ahí, nos deice que hacer y aparte los datos de la forma, lo va a codificar en el texto con el text


```
  <div>
    <label style="display: block" for="product_name">Name</label>
    <input type="text" value="Pans" name="product[name]" id="product_name" />
  </div>


```

Todo esas REST, las hace el framework, es importanta saber como funcionan, 


Para mostrar, es así, y los parametros van en el URI (por convencion) o en el POST, por lo que el ID va sobre el URI, podemos manejar usando JASON, con el mismo ID, para diferentes salida; respetando la idea de programarlo una sola vez.

